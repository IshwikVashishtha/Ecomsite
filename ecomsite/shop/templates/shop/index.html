{% extends 'shop/base.html' %}
{% load static %}
{% block style %}<link rel="stylesheet" href="{% static 'shop/style.css' %}" />{% endblock %}
{% block body %}

<div class="container my-5">
  <div class="row mb-4">
    <div class="col-md-10 offset-md-1">
      <form class="search-form" method="GET">
        <div class="search-input-group">
          <input
            type="search"
            name="item_name"
            placeholder="Search for products..."
            class="form-control"
            aria-label="Search"
          />
          <button type="submit" class="btn btn-search">
            <i class="bi bi-search"></i>
            <span>Search</span>
          </button>
        </div>
      </form>
    </div>
  </div>

  <div class="row">
    {% for product in product_objects %}
    <div class="col-lg-4 col-md-6 mb-4">
      <div class="product-card">
        <a href="details/{{ product.id }}" class="product-image-link">
          <img
            src="{{ product.image }}"
            class="product-image"
            alt="{{ product.title }}"
          />
        </a>
        <div class="card-body">
          <h6 class="card-title">{{ product.title }}</h6>
          <p class="text-muted small">MRP: ₹{{ product.price }}</p>
          <p class="text-success small price-highlight">
            Now only ₹{{ product.discount_price }}
          </p>
          <p class="card-text small product-description">
            {{ product.description }}
          </p>
          <div class="card-actions">
            <a href="details/{{ product.id }}" class="btn btn-detail">
              <i class="bi bi-info-circle"></i> Detail
            </a>
            <button
              id="{{ product.id }}"
              data-name="{{ product.title }}"
              data-image="{{product.image}}"
              data-price="{{product.discount_price}}"
              class="btn btn-add-to-cart"
            >
              <i class="bi bi-cart-plus"></i> Add To Cart
            </button>
          </div>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>

  <div class="row mt-4">
    <div class="col-md-6 offset-md-3 text-center">
      <nav>
        <ul class="pagination-custom">
          {% if product_objects.has_previous %}
          <li>
            <a href="?page={{ product_objects.previous_page_number }}">Previous</a>
          </li>
          {% endif %}
          <li class="current-page">
            <span>
              Page {{ product_objects.number }} of {{product_objects.paginator.num_pages }}
            </span>
          </li>
          {% if product_objects.has_next %}
          <li>
            <a href="?page={{ product_objects.next_page_number }}">Next</a>
          </li>
          {% endif %}
        </ul>
      </nav>
    </div>
  </div>
</div>

{% endblock %}